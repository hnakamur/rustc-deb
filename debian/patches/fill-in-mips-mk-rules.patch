Description: Fill in mips Makefile rules
 Upstream is about to delete the Makefiles in the next version, so this will
 remain a Debian-specific patch.
Author: Ximin Luo <infinity0@debian.org>
Bug: https://github.com/rust-lang/rust/pull/38650
Forwarded: not-needed
---
This patch header follows DEP-3: http://dep.debian.net/deps/dep3/
diff --git a/mk/cfg/mips-unknown-linux-gnu.mk b/mk/cfg/mips-unknown-linux-gnu.mk
index 0783a4c17a..6c018d8e88 100644
--- a/mk/cfg/mips-unknown-linux-gnu.mk
+++ b/mk/cfg/mips-unknown-linux-gnu.mk
@@ -18,7 +18,7 @@ CFG_EXE_SUFFIX_mips-unknown-linux-gnu :=
 CFG_WINDOWSY_mips-unknown-linux-gnu :=
 CFG_UNIXY_mips-unknown-linux-gnu := 1
 CFG_LDPATH_mips-unknown-linux-gnu :=
-CFG_RUN_mips-unknown-linux-gnu=
-CFG_RUN_TARG_mips-unknown-linux-gnu=
+CFG_RUN_mips-unknown-linux-gnu=$(2)
+CFG_RUN_TARG_mips-unknown-linux-gnu=$(call CFG_RUN_mips-unknown-linux-gnu,,$(2))
 RUSTC_FLAGS_mips-unknown-linux-gnu :=
 CFG_GNU_TRIPLE_mips-unknown-linux-gnu := mips-unknown-linux-gnu
diff --git a/mk/cfg/mips64-unknown-linux-gnuabi64.mk b/mk/cfg/mips64-unknown-linux-gnuabi64.mk
index 34aee77ae2..1a6ec147bb 100644
--- a/mk/cfg/mips64-unknown-linux-gnuabi64.mk
+++ b/mk/cfg/mips64-unknown-linux-gnuabi64.mk
@@ -1 +1,24 @@
-# rustbuild-only target
+# mips64-unknown-linux-gnu configuration
+CC_mips64-unknown-linux-gnu=mips64-linux-gnu-gcc
+CXX_mips64-unknown-linux-gnu=mips64-linux-gnu-g++
+CPP_mips64-unknown-linux-gnu=mips64-linux-gnu-gcc
+AR_mips64-unknown-linux-gnu=mips64-linux-gnu-ar
+CFG_LIB_NAME_mips64-unknown-linux-gnu=lib$(1).so
+CFG_STATIC_LIB_NAME_mips64-unknown-linux-gnu=lib$(1).a
+CFG_LIB_GLOB_mips64-unknown-linux-gnu=lib$(1)-*.so
+CFG_LIB_DSYM_GLOB_mips64-unknown-linux-gnu=lib$(1)-*.dylib.dSYM
+CFG_JEMALLOC_CFLAGS_mips64-unknown-linux-gnu := -mips64r2 -mabi=64 $(CFLAGS)
+CFG_GCCISH_CFLAGS_mips64-unknown-linux-gnu := -Wall -g -fPIC -mips64r2 -mabi=64 $(CFLAGS)
+CFG_GCCISH_CXXFLAGS_mips64-unknown-linux-gnu := -fno-rtti $(CXXFLAGS)
+CFG_GCCISH_LINK_FLAGS_mips64-unknown-linux-gnu := -shared -fPIC -g -mips64r2
+CFG_GCCISH_DEF_FLAG_mips64-unknown-linux-gnu := -Wl,--export-dynamic,--dynamic-list=
+CFG_LLC_FLAGS_mips64-unknown-linux-gnu :=
+CFG_INSTALL_NAME_mips64-unknown-linux-gnu =
+CFG_EXE_SUFFIX_mips64-unknown-linux-gnu :=
+CFG_WINDOWSY_mips64-unknown-linux-gnu :=
+CFG_UNIXY_mips64-unknown-linux-gnu := 1
+CFG_LDPATH_mips64-unknown-linux-gnu :=
+CFG_RUN_mips64-unknown-linux-gnu=$(2)
+CFG_RUN_TARG_mips64-unknown-linux-gnu=$(call CFG_RUN_mips64-unknown-linux-gnu,,$(2))
+RUSTC_FLAGS_mips64-unknown-linux-gnu :=
+CFG_GNU_TRIPLE_mips64-unknown-linux-gnu := mips64-unknown-linux-gnu
diff --git a/mk/cfg/mips64el-unknown-linux-gnuabi64.mk b/mk/cfg/mips64el-unknown-linux-gnuabi64.mk
index 34aee77ae2..1b6eadf172 100644
--- a/mk/cfg/mips64el-unknown-linux-gnuabi64.mk
+++ b/mk/cfg/mips64el-unknown-linux-gnuabi64.mk
@@ -1 +1,24 @@
-# rustbuild-only target
+# mips64el-unknown-linux-gnu configuration
+CC_mips64el-unknown-linux-gnu=mips64el-linux-gnu-gcc
+CXX_mips64el-unknown-linux-gnu=mips64el-linux-gnu-g++
+CPP_mips64el-unknown-linux-gnu=mips64el-linux-gnu-gcc
+AR_mips64el-unknown-linux-gnu=mips64el-linux-gnu-ar
+CFG_LIB_NAME_mips64el-unknown-linux-gnu=lib$(1).so
+CFG_STATIC_LIB_NAME_mips64el-unknown-linux-gnu=lib$(1).a
+CFG_LIB_GLOB_mips64el-unknown-linux-gnu=lib$(1)-*.so
+CFG_LIB_DSYM_GLOB_mips64el-unknown-linux-gnu=lib$(1)-*.dylib.dSYM
+CFG_JEMALLOC_CFLAGS_mips64el-unknown-linux-gnu := -mips64r2 -mabi=64 $(CFLAGS)
+CFG_GCCISH_CFLAGS_mips64el-unknown-linux-gnu := -Wall -g -fPIC -mips64r2 -mabi=64 $(CFLAGS)
+CFG_GCCISH_CXXFLAGS_mips64el-unknown-linux-gnu := -fno-rtti $(CXXFLAGS)
+CFG_GCCISH_LINK_FLAGS_mips64el-unknown-linux-gnu := -shared -fPIC -g -mips64r2
+CFG_GCCISH_DEF_FLAG_mips64el-unknown-linux-gnu := -Wl,--export-dynamic,--dynamic-list=
+CFG_LLC_FLAGS_mips64el-unknown-linux-gnu :=
+CFG_INSTALL_NAME_mips64el-unknown-linux-gnu =
+CFG_EXE_SUFFIX_mips64el-unknown-linux-gnu :=
+CFG_WINDOWSY_mips64el-unknown-linux-gnu :=
+CFG_UNIXY_mips64el-unknown-linux-gnu := 1
+CFG_LDPATH_mips64el-unknown-linux-gnu :=
+CFG_RUN_mips64el-unknown-linux-gnu=$(2)
+CFG_RUN_TARG_mips64el-unknown-linux-gnu=$(call CFG_RUN_mips64el-unknown-linux-gnu,,$(2))
+RUSTC_FLAGS_mips64el-unknown-linux-gnu :=
+CFG_GNU_TRIPLE_mips64el-unknown-linux-gnu := mips64el-unknown-linux-gnu
diff --git a/mk/cfg/mipsel-unknown-linux-gnu.mk b/mk/cfg/mipsel-unknown-linux-gnu.mk
index f15a086b64..d431d754c7 100644
--- a/mk/cfg/mipsel-unknown-linux-gnu.mk
+++ b/mk/cfg/mipsel-unknown-linux-gnu.mk
@@ -1,7 +1,7 @@
 # mipsel-unknown-linux-gnu configuration
 CC_mipsel-unknown-linux-gnu=mipsel-linux-gnu-gcc
 CXX_mipsel-unknown-linux-gnu=mipsel-linux-gnu-g++
-CPP_mipsel-unknown-linux-gnu=mipsel-linux-gnu-gcc
+CPP_mipsel-unknown-linux-gnu=mipsel-linux-gnu-gcc -E
 AR_mipsel-unknown-linux-gnu=mipsel-linux-gnu-ar
 CFG_LIB_NAME_mipsel-unknown-linux-gnu=lib$(1).so
 CFG_STATIC_LIB_NAME_mipsel-unknown-linux-gnu=lib$(1).a
@@ -18,7 +18,7 @@ CFG_EXE_SUFFIX_mipsel-unknown-linux-gnu :=
 CFG_WINDOWSY_mipsel-unknown-linux-gnu :=
 CFG_UNIXY_mipsel-unknown-linux-gnu := 1
 CFG_LDPATH_mipsel-unknown-linux-gnu :=
-CFG_RUN_mipsel-unknown-linux-gnu=
-CFG_RUN_TARG_mipsel-unknown-linux-gnu=
+CFG_RUN_mipsel-unknown-linux-gnu=$(2)
+CFG_RUN_TARG_mipsel-unknown-linux-gnu=$(call CFG_RUN_mipsel-unknown-linux-gnu,,$(2))
 RUSTC_FLAGS_mipsel-unknown-linux-gnu :=
 CFG_GNU_TRIPLE_mipsel-unknown-linux-gnu := mipsel-unknown-linux-gnu
