Bug: https://bugs.llvm.org/show_bug.cgi?id=8220
--- a/src/librustc_llvm/build.rs
+++ b/src/librustc_llvm/build.rs
@@ -152,7 +152,9 @@
             continue;
         }
 
-        cfg.flag(flag);
+        if flag.starts_with("-I") || flag.starts_with("-D") || flag.starts_with("-std=") {
+            cfg.flag(flag);
+        }
     }
 
     for component in &components {
