Bug: https://github.com/rust-lang/rust/pull/47541
Applied-Upstream: commit:f4bcfc5317258c77e25ab5c0f3eec5599287fdbd
--- a/src/librustc_trans/cabi_sparc64.rs
+++ b/src/librustc_trans/cabi_sparc64.rs
@@ -26,7 +26,7 @@ fn is_homogeneous_aggregate<'a, 'tcx>(cc
         let valid_unit = match unit.kind {
             RegKind::Integer => false,
             RegKind::Float => true,
-            RegKind::Vector => size.bits() == 128
+            RegKind::Vector => size.bits() == 256
         };
 
         if valid_unit {
@@ -52,7 +52,7 @@ fn classify_ret_ty<'a, 'tcx>(ccx: &Crate
     }
     let size = ret.layout.size(ccx);
     let bits = size.bits();
-    if bits <= 128 {
+    if bits <= 256 {
         let unit = if bits <= 8 {
             Reg::i8()
         } else if bits <= 16 {
@@ -86,6 +86,10 @@ fn classify_arg_ty<'a, 'tcx>(ccx: &Crate
     }
 
     let total = arg.layout.size(ccx);
+    if total.bits() > 128 {
+       arg.make_indirect(ccx);
+       return;
+    }
     arg.cast_to(ccx, Uniform {
         unit: Reg::i64(),
         total
